const grid = Hexagon(16)
  .seq(
    { from: -4, upto: 4 },
    { from: -4, upto: 4 },
    (i, j) =>
      move((i + (j % 2) * 0.5) * 18 * Math.sqrt(3) * 0.5, j * 18 * 0.75),
    Group
  )
  .gridView();

const base = await grid.cutFrom(Arc(100)).ez([1]).gridView();

const ring = await Arc(99).cutFrom(Arc(102)).ez([2.5]).gridView();

const sorter = await ring.and(base).stl('sorter');
const wall1 = await grid
  .cutFrom(Box(80, 110))
  .rz(1 / 4)
  .ez([2])
  .rx(1 / 4);

const wall = await wall1
  .align('x<')
  .and(align('x>'))
  .align('x<')
  .and(align('x>'))
  .align('x<')
  .and(align('x>'))
  .view();

const bentWall = await wall
  .clip(Box(475, 50, 500))
  .scale(1 / 1.5)
  .align('z>')
  .y(1)
  .bend(50)
  .view();

// TODO: Figure out why this is hanging.
// await bentWall.and(ring, base, ring.z(52)).scale(1.5).view().stl('tall_sorter');
