import { fromRaster } from './fromRaster.js';
import test from 'ava';

test('Simple', async (t) => {
  const raster = [
    [13, 34, 53, 75],
    [34, 46, 61, 79],
    [59, 64, 71, 86],
    [77, 81, 86, 99],
  ];
  const result = await fromRaster(raster, [0, 25, 50, 75, 100]);
  t.deepEqual(result, [
    [
      [
        [0, 0.5714285714285714, 0],
        [0, 0, 0],
        [0.5714285714285714, 0, 0],
      ],
    ],
    [
      [
        [0.5714285714285714, 0, 25],
        [1, 0, 25],
        [2, 0, 25],
        [3, 0, 25],
        [2.7777777777777777, 1, 25],
        [2.2666666666666666, 2, 25],
        [2, 2.2666666666666666, 25],
        [1, 2.6470588235294117, 25],
        [0, 2.888888888888889, 25],
        [0, 2, 25],
        [0, 1, 25],
        [0, 0.5714285714285714, 25],
      ],
    ],
    [
      [
        [1, 1.2222222222222223, 50],
        [1.2666666666666666, 1, 50],
        [1.8421052631578947, 0, 50],
        [2, 0, 50],
        [3, 0, 50],
        [3, 1, 50],
        [3, 2, 50],
        [3, 3, 50],
        [2, 3, 50],
        [1, 3, 50],
        [0, 3, 50],
        [0, 2, 50],
        [0, 1.6400000000000001, 50],
      ],
    ],
    [
      [
        [1, 2.6470588235294117, 75],
        [2, 2.2666666666666666, 75],
        [2.2666666666666666, 2, 75],
        [2.7777777777777777, 1, 75],
        [3, 0, 75],
        [3, 1, 75],
        [3, 2, 75],
        [3, 3, 75],
        [2, 3, 75],
        [1, 3, 75],
        [0, 3, 75],
        [0, 2.888888888888889, 75],
      ],
    ],
  ]);
});
