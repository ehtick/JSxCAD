import { fill } from './fill.js';
import { initCgal } from './getCgal.js';

import test from 'ava';

test.beforeEach(async (t) => {
  await initCgal();
});

test('Fill', (t) => {
  const filled = fill([
    {
      type: 'polygonsWithHoles',
      polygonsWithHoles: [
        {
          points: [
            [-0.8660254037844385, -0.5000000000000003],
            [0.8660254037844387, -0.49999999999999983],
            [6.123233995736766e-17, 1],
          ],
          exactPoints: [
            [
              '-7800463371553961/9007199254740992',
              '-4503599627370499/9007199254740992',
            ],
            [
              '7800463371553963/9007199254740992',
              '-9007199254740989/18014398509481984',
            ],
            ['4967757600021511/81129638414606681695789005144064', '1'],
          ],
          holes: [],
        },
      ],
      plane: [0, 0, 1, 0],
      exactPlane: ['0', '0', '1', '0'],
      matrix: [
        1,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        1,
        '1',
        '0',
        '0',
        '0',
        '0',
        '1',
        '0',
        '0',
        '0',
        '0',
        '1',
        '0',
        '1',
      ],
      tags: [],
    },
   { 'type': 'polygonsWithHoles', 'polygonsWithHoles': [{ 'points': [[-0.8660254037844385, -0.5000000000000003], [0.8660254037844387, -0.49999999999999983], [6.123233995736766e-17, 1]], 'exactPoints': [['-7800463371553961/9007199254740992', '-4503599627370499/9007199254740992'], ['7800463371553963/9007199254740992', '-9007199254740989/18014398509481984'], ['4967757600021511/81129638414606681695789005144064', '1']], 'holes': [] }], 'plane': [0, 0, 1, 0], 'exactPlane': ['0', '0', '1', '0'], 'matrix': [0.5, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 1, '1/2', '0', '0', '0', '0', '1/2', '0', '0', '0', '0', '1/2', '0', '1'], 'tags': [] },
  ]);
  t.deepEqual(JSON.parse(JSON.stringify(filled)),
[{ 'type': 'polygonsWithHoles', 'polygonsWithHoles': [{ 'points': [[-0.8660254037844385, -0.5000000000000003], [0.8660254037844387, -0.49999999999999983], [6.123233995736766e-17, 1]], 'exactPoints': [['-7800463371553961/9007199254740992', '-4503599627370499/9007199254740992'], ['7800463371553963/9007199254740992', '-9007199254740989/18014398509481984'], ['4967757600021511/81129638414606681695789005144064', '1']], 'holes': [{ 'points': [[0.43301270189221935, -0.12499999999999996], [-0.43301270189221924, -0.12500000000000008], [3.061616997868383e-17, 0.25]], 'exactPoints': [['7800463371553963/18014398509481984', '-9007199254740989/72057594037927936'], ['-7800463371553961/18014398509481984', '-4503599627370499/36028797018963968'], ['4967757600021511/162259276829213363391578010288128', '1/4']], 'holes': [] }] }], 'plane': [0, 0, 1, 0], 'exactPlane': ['0', '0', '1', '0'], 'matrix': [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, '1', '0', '0', '0', '0', '1', '0', '0', '0', '0', '1', '0', '1'], 'tags': [] }]);
});
