import { join } from './join.js';
import { initCgal } from './getCgal.js';

import test from 'ava';

test.beforeEach(async (t) => {
  await initCgal();
});

test('Join Boxes', (t) => {
  const result = join(
    [
{"type":"graph","matrix":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,"1 0 0 0 0 1 0 0 0 0 1 0 1"],"tags":[],"graph":{"serializedSurfaceMesh":"8\n1/2 -1 -3/2 500 -1000 -1500\n1/2 1 -3/2 500 1000 -1500\n-1/2 1 -3/2 -500 1000 -1500\n-1/2 -1 -3/2 -500 -1000 -1500\n1/2 -1 3/2 500 -1000 1500\n1/2 1 3/2 500 1000 1500\n-1/2 1 3/2 -500 1000 1500\n-1/2 -1 3/2 -500 -1000 1500\n\n12\n3 2 1 0\n3 2 0 3\n3 6 4 5\n3 6 7 4\n3 5 4 1\n3 0 1 4\n3 6 5 2\n3 1 2 5\n3 7 6 3\n3 2 3 6\n3 4 7 0\n3 3 0 7\n","hash":"/V5KuVgejGFJmafZC5NRewa0urP5L+ni/15qm3xL458="}},
    {"type":"graph","matrix":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,"1 0 0 0 0 1 0 0 0 0 1 0 1"],"tags":[],"graph":{"serializedSurfaceMesh":"8\n3/2 -1 -1/2 1500 -1000 -500\n3/2 1 -1/2 1500 1000 -500\n-3/2 1 -1/2 -1500 1000 -500\n-3/2 -1 -1/2 -1500 -1000 -500\n3/2 -1 1/2 1500 -1000 500\n3/2 1 1/2 1500 1000 500\n-3/2 1 1/2 -1500 1000 500\n-3/2 -1 1/2 -1500 -1000 500\n\n12\n3 2 1 0\n3 2 0 3\n3 6 4 5\n3 6 7 4\n3 5 4 1\n3 0 1 4\n3 6 5 2\n3 1 2 5\n3 7 6 3\n3 2 3 6\n3 4 7 0\n3 3 0 7\n","hash":"I16QZUoaO7D8XzZL9L6hzmezXh/d41ZXP0o+WyN0Lj0="}} 
    ],
    1
  );
console.log(JSON.stringify(result));
  t.deepEqual(JSON.parse(JSON.stringify(result)),
[{"type":"graph","matrix":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,"1 0 0 0 0 1 0 0 0 0 1 0 1"],"tags":[],"graph":{"serializedSurfaceMesh":"24\n1/2 -1 -1/2 500 -1000 -500\n1/2 -1 -3/2 500 -1000 -1500\n-1/2 1 -1/2 -500 1000 -500\n-1/2 1 -3/2 -500 1000 -1500\n1/2 1 -1/2 500 1000 -500\n1/2 1 -3/2 500 1000 -1500\n-1/2 1 3/2 -500 1000 1500\n-1/2 -1 3/2 -500 -1000 1500\n-1/2 1 1/2 -500 1000 500\n1/2 1 3/2 500 1000 1500\n1/2 -1 3/2 500 -1000 1500\n1/2 -1 1/2 500 -1000 500\n-1/2 -1 -1/2 -500 -1000 -500\n-1/2 -1 -3/2 -500 -1000 -1500\n-1/2 -1 1/2 -500 -1000 500\n1/2 1 1/2 500 1000 500\n3/2 -1 1/2 1500 -1000 500\n3/2 1 1/2 1500 1000 500\n-3/2 -1 -1/2 -1500 -1000 -500\n-3/2 -1 1/2 -1500 -1000 500\n3/2 1 -1/2 1500 1000 -500\n3/2 -1 -1/2 1500 -1000 -500\n-3/2 1 -1/2 -1500 1000 -500\n-3/2 1 1/2 -1500 1000 500\n\n44\n3 0 5 4\n3 0 1 5\n3 12 3 13\n3 2 3 12\n3 15 17 20\n3 15 20 4\n3 2 23 8\n3 4 5 2\n3 4 8 15\n3 2 8 4\n3 2 5 3\n3 15 6 9\n3 22 23 2\n3 6 15 8\n3 7 6 8\n3 7 8 14\n3 11 0 21\n3 11 14 0\n3 0 12 1\n3 11 21 16\n3 14 11 7\n3 12 13 1\n3 12 14 19\n3 18 12 19\n3 12 0 14\n3 7 11 10\n3 3 5 1\n3 3 1 13\n3 10 15 9\n3 15 10 11\n3 6 10 9\n3 10 6 7\n3 15 16 17\n3 16 15 11\n3 16 21 20\n3 17 16 20\n3 21 4 20\n3 0 4 21\n3 2 12 22\n3 18 22 12\n3 14 23 19\n3 14 8 23\n3 18 19 22\n3 23 22 19\n","hash":"qkYP2R4+LyJHwmj35tZb8Rt2e1dF6mHoidWxGaQNETA="}}]);

});
